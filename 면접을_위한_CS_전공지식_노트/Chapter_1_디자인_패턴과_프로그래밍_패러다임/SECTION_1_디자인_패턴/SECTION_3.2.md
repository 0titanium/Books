## 3.2 메모리

메모리 계층 구조와 메모리 관리

## 3.2.1 메모리 계층

- 레지스터 : CPU 내부 작은 메모리. 휘발성, 가장 빠른 속도, 기억 용량 가장 적음

- 캐시 : L1, L2 캐시. 휘발성, 빠른 속도.

- 주기억장치 : RAM. 휘발성, 보통 속도, 보통 기억 용량.

- 보조기억장치 : HDD, SDD. 비휘발성, 낮은 속도, 많은 기억 용량.

## 캐시

데이터를 미리 복사해놓는 임시 저장소.

빠른 장치, 느린 장치 사이에서 속도 차에 따른 병목 현상을 줄이기 위한 메모리.

메모리 - 레지스터(캐싱 계층) - CPU. 속도 차 해결.

## 지역성 원리

캐시를 직접 설정할 땐 자주 사용하는 데이터 기반으로 설정.

자주 사용의 기준이 지역성.

시간 지역성, 공간 지역성으로 나뉨.

### 시간 지역성

최근 사용 데이터에 접근하려는 특성.

### 공간 지역성

최근 접근한 데이터를 이루고 있는 공간, 그 가까운 공간에 접근하는 특성.

### 캐시 히트

캐시에서 원하는 데이터를 찾음

제어장치를 거치기 때문에 가까운 위치, CPU 내부 버스 이용 때문에 빠름 

### 캐시 미스

캐시에서 원하는 데이터 못찾음 -> 주 메모리에서 찾아옴

시스템 버스 기반 작동 때문에 느림

## 캐시 매핑

캐시가 히트되기 위해 매핑하는 방법

CPU 레지스터, 주 메모리 간 데이터 전달을 기반

- 직접 매핑 : 한 메모리 위치에 한 캐시 위치 매핑

- 연관 매핑 : 순서 상관없이 관련있는 캐시와 메모리 매핑

- 집합 연관 매핑 : 순서 일치. 캐시의 집합 내 무작위로 데이터 저장해 메모리 매핑.

## 가상 메모리

실제 이용 가능한 메모리를 추상화하여 더 큰 메모리로 보이게 하는 방법

가상 주소와 실제 주소로 나뉨.

가상 주소는 메모리관리장치(MMU)에 의해 실제 주소로 변환됨.