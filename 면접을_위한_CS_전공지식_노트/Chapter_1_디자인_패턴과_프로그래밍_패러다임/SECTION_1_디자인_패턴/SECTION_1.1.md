# 디자인 패턴

## 디자인 패턴

프로그램 설계 시 발생했던 문제점에 대해 객체 간 상호작용등을 이용하여 해결할 수 있도록 규약의 형태로 만든 것.

## 1.1.1 싱글톤 패턴

하나의 클래스에 오직 하나의 인스턴스만 가지는 패턴.

데이터베이스 연결 모듈에 주로 사용.

- 장점: 하나의 인스턴스를 다른 모듈들이 공유하므로 인스턴스 생성 비용 절약.

- 단점: 의존성이 높아짐. TDD(주로 단위 테스트)에 걸림돌. 테스트들은 독립적이어야 하며 테스트 순서가 상관없어야 하기 때문.

### 의존성 주입 DI Dependency Injection

모듈 간 결합이 강해질 수 있다는 싱글톤 패턴의 단점을 해결.

- 의존성: 종속성. 메인 모듈이 변하면 하위 모듈도 모두 변해야함.

- 의존성 주입자: 메인 모듈이 직접 의존성을 주입하지 않기 위한 중간자.

- 디커플링: 의존성이 떨어짐을 의미하는 단어. 예시) 디커플링 된다. = 의존성이 떨어지게 된다.

- 장점: 모듈을 쉽게 교체 가능 = 테스트 용이 = 마이그레이션 용이. 추상화 레이어를 기반으로한 구현체 = 의존성 방향 일관적, 애플리케이션 추론 용이, 모듈 간 관계 명확.

- 단점: 모듈 분리로 인한 클래스 수 증가, 런타임 패널티

- 원칙: 상위 모듈은 하위 모듈의 어떤 것도 가져오지 않아야 함. 추상화에 의존. 추상화는 세부 사항에 의존하지 말 것.

## 1.1.2 팩토리 패턴

객체 사용 코드에서 객체 생성 부분을 분리, 추상화한 패턴.

상속 관계의 클래스들에서 상위 클래스가 뼈대, 하위 클래스가 객체 생성의 구체성을 담당하는 패턴.

상위, 하위 클래스 분리로 느슨한 결합.

상위 클래스는 인스턴스 생성 방식을 몰라도 되므로 유연해짐.

객체 생성 로직 분리로 유지 보수성 증가 = 코드 리팩토링 시 수정 부분이 적어짐.

## 1.1.3 전략 패턴

정책 패턴이라고도 함.

객체 행위를 바꾸고 싶을 때, 전략이라 부르는 캡슐화한 알고리즘을 컨텍스트 안에서 수정. 상호 교체 가능하게. 직접 수정하지 않음.

### 컨텍스트

어떤 작업을 완료할 때 필요한 모든 관련 정보. 상황, 맥락, 문맥.

## 1.1.4 옵저버 패턴

주체가 어떤 객체의 상태 변화를 관찰. 상태 변화 시 메서드 등을 통해 목록에 있는 옵저버들에게 변화를 알리는 패턴.

주체 = 객체 상태 관찰자.

옵저버 = 추가 변화 사항이 생기는 객체.

주로 이벤트 기반 시스템에 사용.

MVC 패턴에도 사용. 주체 = 모델에 변경 사항 발생, 옵저버 = 뷰에 알림, 컨트롤러 작동.

### 자바의 상속과 구현

- 상속: 자식 클래스가 부모 클래스의 메서드 등을 상속받아 사용, 자식 클래스에서 추가, 확장이 가능. 재사용성, 중복성 최소화.

- 구현: 부모 인터페이스를 자식 클래스에서 재정의하여 구현. 부모 클래스의 메서드 재정의 구현 필수.

- 차이점: 상속은 일반, abstract 클래스 기반. 구현은 인터페이스 기반.

### 프록시 객체

어떤 대상의 기본적인 동작(속성 접근, 할당, 순회, 열거, 함수 호출 등)의 작업을 가로챌 수 있는 객체.

### DOM (Document Object Model)

문서 객체 모델. 웹 브라우저 상 화면을 이루는 요소들.

## 1.1.5 프록시 패턴과 프록시 서버

대상 객체에 접근하기 전 접근 흐름을 가로채 접근을 필터링, 수정 등의 역할을 하는 계층이 있는 디자인 패턴.

객체의 속성과 변환을 보완하고 보안, 데이터 검증, 캐싱, 로깅에 사용.

프록시 객체, 프록시 서버에 활용.

### 프록시 서버에서의 캐싱

캐시에 정보 담아둠. 요청 정보가 캐시 안에 있으면 원격 서버 대신 캐시 안의 정보를 응답. 트래픽 절감이 장점.

### 프록시 서버

클라이언트와 서버의 중간 계층. 클라이언트가 프록시 서버를 통해 다른 네트워크 서비스에 간접적으로 접속 가능하게 하는 컴퓨터 시스템 혹은 응용 프로그램.

### nginx

비동기 이벤트 기반 구조. 다수 연결 효과적 처리 가능 웹 서버. 주로 Node.js의 프록시 서버로 활용.

간접적 접근을 강제하여 보안 강화.

포트 은닉, 정적 자원 gzip 압축, 메인 서버 앞 로깅.

### 버퍼 오버플로우

버퍼 = 데이터 저장 메모리 공간.

오버플로우 = 초과.

사용되지 않아야 할 영역에 데이터가 덮어씌워져 주소나 값을 바꾸는 공격 발생 가능성.

### gzip 압축

L777, Huffman 코딩의 조합인 DEFLATE 알고리즘 기반 압축 기술.

데이터 전송량 감소, 압축 해제시 서버 CPU 오버헤드를 고려하여 사용 유무 결정할 것.

### CloudFlare

CDN(Content Delivery Network) 서비스. 지리적으로 분산된 서버를 연결하여 시스템의 컨텐츠 전달을 빠르게 함.

웹 서버 앞 프록시 서버로 두어 DDOS 방어, HTTPS 구축에 사용. 의심 트래픽 증가 시 판단 후 CAPTCHA 등을 기반으로 일정 부분 막아 클라우드 서비스 비용 절감 가능.

### DDOS 공격 방어

짧은 기간 동안 많은 요청을 보내 네트워크 마비시킴. CloudFlare는 시스템적 트래픽을 자동 차단. 거대 네트워크 용량, 캐싱 전략으로 소규모 DDOS 공격 쉽게 방어. 방화벽 대시보드 제공.

### HTTPS 구축

별도 인증서 설치 없이 구축. 보통은 서버에서 인증서 기반으로 구축.

### CDN

사용자와 물리적으로 가까운 곳에서 컨텐츠 캐싱, 배포하는 서버 네트워크. 사용자가 웹 서버로부터 컨텐츠 다운로드하는 시간 단축.

### CORS

Cross-Origin Resource Sharing. 웹 브라우저에서 리소스 다운 시 서버가 다른 오리진을 통하지 못하도록 하는 HTTP 헤더 기반 메커니즘.

프론트엔드 개발 중 백엔드 서버와 통신 시 CORS 에러를 주로 만남. 프론트엔드에서 프록시 서버를 만들기도 함.

### Origin

프로토콜, 호스트 명, 포트의 조합.

https://domain.com:12010/test가 주소라면

https://domain.com:12010가 오리진.

### 127.0.0.1

루프백(loopback) IP. 로컬 서버 IP.

로컬호스트나 127.0.0.1을 주소창에 입력하면 DNS를 거치지 않고 연결됨.

## 1.1.6 이터레이터 패턴

이터레이터를 사용하여 컬렉션 요소에 접근하는 패턴.

자료형 구조와 상관없이 이터레이터 인터페이스 하나로 순회 가능.

## 1.1.7 노출 모듈 패턴

즉시 실행 함수를 통해 private, public같은 제어자를 만드는 패턴.

### public

클래스에 정의된 함수에서 접근 가능.

자식, 외부 클래스에서 접근 가능.

### protected

클래스에 정의된 함수에서 접근 가능.

자식 ok, 외부 클래스 접근 불가.

### private

클래스에 정의된 함수에서만 접근 가능.

### 즉시 실행 함수

함수를 정의하자 마자 호출하는 함수.

초기화 코드, 라이브러리 내 전역 변수 충돌 방지에 사용.

## 1.1.8 MVC 패턴

Model, View, Controller로 이뤄진 디자인 패턴.

애플리케이션 구성 요소를 세 가지로 구분, 개발 프로세스에서 각각의 요소에만 집중 개발 가능.

장점: 재사용성과 확장성 높음.

단점: 애플리케이션이 복잡해질수록 모델과 뷰의 관계가 복잡해짐.

- 모델: 애플리케이션의 데이터. 데이터베이스, 상수, 변수 등.

- 뷰: 사용자 인터페이스 요소. 모델 기반의 사용자가 보는 화면. 화면 표시 정보만 가져야 함. 변경 발생 시 컨트롤러에 전달.

- 컨트롤러: 모델과 뷰를 잇는 역할. 이벤트 등의 메인 로직 담당. 모델, 뷰의 생명주기 관리. 모델과 뷰의 변경을 통지받으면 해석하여 구성 요소에 해당 내용 전파.

- Spring: MVC 패턴을 이용한 자바 프레임워크.

## 1.1.9 MVP 패턴

MVC에서 C 컨트롤러가 P 프레젠터로 교체된 패턴.

뷰와 프레젠터는 일대일. MVC보다 강한 결합의 디자인 패턴.

## 1.1.10 MVVM 패턴

MVC의 C가 VM 뷰모델로 바뀐 패턴. 뷰모델은 뷰를 더 추상화한 계층.

커맨드와 데이터 바인딩이 MVC와의 차이점.

뷰와 뷰모델 사이의 양방향 데이터 바인딩 지원.

UI를 별도의 코드 수정 없이 재사용 가능.

단위 테스트 용이.

### 커맨드

여러 요소를 하나의 액션으로 처리하게 하는 기법.

### 데이터 바인딩

화면의 데이터와 메모리의 데이터를 일치시키는 기법.

뷰모델 변경 시 뷰도 변경.